

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Bsmslwx">
  <meta name="keywords" content="">
  
  <title>VRP基础,命令行基础,文件系统基础,VRP系统管理 ~ BsmslwxBlog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":80,"cursorChar":".","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"§"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Bsmslwx</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/bg4.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="VRP基础,命令行基础,文件系统基础,VRP系统管理">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-07-16 14:16" pubdate>
        2021年7月16日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      6.5k 字
    </span>
  

  

  
  
</div>

            
          </div>

          
            <div class="scroll-down-bar">
              <i class="iconfont icon-arrowdown"></i>
            </div>
          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">VRP基础,命令行基础,文件系统基础,VRP系统管理</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2021年7月21日 下午
                
              </p>
            
            <div class="markdown-body">
              <h1 id="VRP基础-命令行基础-文件系统基础-VRP系统管理"><a href="#VRP基础-命令行基础-文件系统基础-VRP系统管理" class="headerlink" title="VRP基础,命令行基础,文件系统基础,VRP系统管理"></a>VRP基础,命令行基础,文件系统基础,VRP系统管理</h1><h2 id="1-VRP基础"><a href="#1-VRP基础" class="headerlink" title="1.VRP基础"></a>1.VRP基础</h2><p>通用路由平台VRP ( Versatile Routing Platform )是华为公司数据通信产品的通用操作系统平台，它以IP业务为核心，采用组件化的体系结构，在实现丰富功能特性的同时，还提供了基于应用的可裁剪和可扩展的功能，使得路由器和交换机的运行效率大大增加。能对VRP熟练地进行配置和操作是对网络工程师的一种基本要求。</p>
<ol>
<li>交换机的应用<ul>
<li>由集线器(HUB)和中继器组建的以太网，实质上是一种共享式以太网。共享式以太网的主要缺陷有︰冲突严重、广播泛滥、安全性差</li>
<li>交换机是工作在数据链路层的设备。交换机可以将一个共享式以太网分割为多个冲突域。链路层流量被隔离在不同的冲突域中进行转发，如此便极大地提升了以太网的性能。更进一步说，通常主机和交换机之间以及交换机与交换机之间都使用全双工技术进行通信，这时冲突现象会被彻底消除</li>
<li>在由Hub搭建的网络中，所有的主机都处于同一个冲突域，主机A发送数据给主机B时，其他主机都将收到此数据，但同时这些主机都不能发送数据。用交换机替代Hub后，因为交换机分割了冲突域，所以在主机A发送数据给主机B时，主机C和主机D之间也可以同时互相发送数据</li>
</ul>
</li>
<li>路由器的应用<ul>
<li>交换机虽然能够隔离冲突域，但是当一台设备发送广播帧时，其他设备仍然都会接收到该广播帧。随着网络规模的增大，广播会越来越多，这样就会影响网络的效率。路由器可以用来分割广播域，减少广播对网络效率的影响</li>
<li>一般情况下，广播帧的转发被限制在广播域内。广播域的边缘是路由器，因为通常路由器不会转发广播帧</li>
<li>路由器负责在网络间转发报文。它能够在自身的路由表里查找到达目的地的下一跳地址，将报文转发给下一跳路由器，如此重复，并最终将报文送达目的地</li>
</ul>
</li>
</ol>
<h3 id="1-1-VRP介绍"><a href="#1-1-VRP介绍" class="headerlink" title="1. 1 VRP介绍"></a>1. 1 VRP介绍</h3><ul>
<li>VRP是华为公司具有完全自主知识产权的网络操作系统，可以运行在多种硬件平台之上。VRP拥有一致的网络界面、用户界面和管理界面，为用户提供了灵活丰富的应用解决方案</li>
<li>VRP平台以TCP/IP协议簇为核心，实现了数据链路层、网络层和应用层的多种协议，在操作系统中集成了路由交换技术、QoS技术、安全技术和P语音技术等数据通信功能，并以IP转发引擎技术作为基础，为网络设备提供了出色的数据转发能力</li>
</ul>
<h3 id="1-2-设备管理口"><a href="#1-2-设备管理口" class="headerlink" title="1.2 设备管理口"></a>1.2 设备管理口</h3><p>ARG3系列路由器和X7系列交换机都提供了Console口作为管理口，AR2200额外提供了Mini USB口作为管理口</p>
<p>使用Console线缆来连接交换机或路由器的Console口与计算机的COM口，这样就可以通过计算机实现本地调试和维护</p>
<p>S5720和AR2200E的Console口是一种符合RS232串口标准的RJ45接口。目前大多数台式电脑提供的COM口都可以与Console口连接。笔记本电脑一般不提供COM口，需要使用USB到RS232的转换接口</p>
<p>在管理设备时，Console接口和Mini USB接口互斥，即同一时刻只能使用其中的1个接口连接到VRP</p>
<h3 id="1-3-参数配置"><a href="#1-3-参数配置" class="headerlink" title="1.3 参数配置"></a>1.3 参数配置</h3><ul>
<li><p>很多终端模拟程序都能发起Console连接，例如，可以使用超级终端程序连接到VRP操作系统。使用超级终端连接VRP时，必须设置端口参数。如果对参数值做了修改，需要恢复默认参数值</p>
</li>
<li><p>完成设置以后，点击“确定”按钮即可与VRP建立连接</p>
</li>
<li><p>在缺少超级终端程序的计算机上，可以使用putty或Secure CRT程序发起Console连接，并连接到VRP，配置参数：</p>
<p>位/秒：9600</p>
<p>数据位：0</p>
<p>奇偶校验：无</p>
<p>停止位：1</p>
<p>数据流控制：无</p>
</li>
</ul>
<h2 id="2-命令行基础"><a href="#2-命令行基础" class="headerlink" title="2.命令行基础"></a>2.命令行基础</h2><p>熟悉VRP命令行并熟练掌握VRP配置</p>
<h3 id="2-1-设备初始化"><a href="#2-1-设备初始化" class="headerlink" title="2.1 设备初始化"></a>2.1 设备初始化</h3><p>管理员和工程师如果要访问在通用路由平台VRP上运行的华为产品，首先要进入启动程序。开机界面信息提供了系统启动的运行程序和正在运行的VRP版本及其加载路径</p>
<p>启动完成以后，系统提示目前正在运行的是自动配置模式。用户可以选择是继续使用自动配置模式或是进入手动配置的模式</p>
<p>如果选择手动配置模式，在提示符处输入Y。在没有特别要求的情况下，我们选择手动配置模式</p>
<h3 id="2-2-命令行视图"><a href="#2-2-命令行视图" class="headerlink" title="2.2 命令行视图"></a>2.2 命令行视图</h3><ol>
<li><p>VRP分层的命令结构定义了很多命令行视图，每条命令只能在特定的视图中执行</p>
<p>进入到VRP系统的配置界面后，VRP上最先出现的视图是用户视图。在该视图下，用户可以查看设备的运行状态和统计信息</p>
<p>若要修改系统参数，用户必须进入系统视图(system-view)。用户还可以通过系统视图进入其他的功能配置视图，如接口视图和协议视图</p>
<p>通过提示符可以判断当前所处的视图，例如︰ “&lt;&gt;”表示用户视图，“[]”表示除用户视图以外的其它视图</p>
</li>
</ol>
<h3 id="2-3-命令行功能"><a href="#2-3-命令行功能" class="headerlink" title="2.3 命令行功能"></a>2.3 命令行功能</h3><p>为了简化操作，系统提供以下的快捷键</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>CTRL+A</td>
<td>把光标移动到当前命令行的最前端</td>
</tr>
<tr>
<td>CTRL+C</td>
<td>停止当前命令的运行</td>
</tr>
<tr>
<td>CTRL+Z</td>
<td>回到用户视图</td>
</tr>
<tr>
<td>CTRL+]</td>
<td>终止当前连接或切换连接</td>
</tr>
<tr>
<td>CTRL+B</td>
<td>将光标左移一个字符</td>
</tr>
<tr>
<td>CTRL+D</td>
<td>删除当前光标所在位置的字符</td>
</tr>
<tr>
<td>CTRL+E</td>
<td>将光标移动到当前行的末尾</td>
</tr>
<tr>
<td>CTRL+F</td>
<td>将光标右移一个字符</td>
</tr>
<tr>
<td>CTRL+H</td>
<td>删除光标左侧的一个字符</td>
</tr>
<tr>
<td>CTRL+N</td>
<td>显示历史命令缓冲区中的后一条命令</td>
</tr>
<tr>
<td>CTRL+P</td>
<td>显示历史命令缓冲区中的前一条命令</td>
</tr>
<tr>
<td>CTRL+W</td>
<td>删除光标左侧的一个字符串</td>
</tr>
<tr>
<td>CTRL+X</td>
<td>删除光标左侧的所有字符</td>
</tr>
<tr>
<td>CTRL+Y</td>
<td>删除光标和其右侧的所有字符</td>
</tr>
<tr>
<td>ESC+B</td>
<td>将光标左移一个字符串</td>
</tr>
<tr>
<td>ESC+D</td>
<td>删除光标右侧的一个字符串</td>
</tr>
<tr>
<td>ESC+F</td>
<td>将光标右移一个字符串</td>
</tr>
<tr>
<td>Backspace</td>
<td>删除光标左边的第一个字符</td>
</tr>
<tr>
<td>TAB</td>
<td>输入不完整的命令并按TAB键，就可以补全该命令</td>
</tr>
</tbody></table>
<h3 id="2-4-命令行在线帮助"><a href="#2-4-命令行在线帮助" class="headerlink" title="2.4 命令行在线帮助"></a>2.4 命令行在线帮助</h3><p>VRP提供两种帮助功能，分别是部分帮助和完全帮助。</p>
<ol>
<li>部分帮助指的是，当用户输入命令时，如果只记得此命令关键字的开头一个或几个字符，可以使用命令行的部分帮助获取以该字符串开头的所有关键字的提示，如本例中所示</li>
<li>完全帮助指的是，在任一命令视图下，用户可以键入“?”获取该命令视图下所有的命令及其简单描述﹔如果键入一条命令关键字，后接以空格分隔的“?”，如果该位置为关键字，则列出全部关键字及其描述</li>
</ol>
<h3 id="2-5-基本配置步骤"><a href="#2-5-基本配置步骤" class="headerlink" title="2.5 基本配置步骤"></a>2.5 基本配置步骤</h3><ul>
<li><p>sysname</p>
<p>配置设备名称</p>
</li>
<li><p>clock timezone </p>
<p>设置所在时区</p>
<p>clock timezone BJ add 08:00:00</p>
</li>
<li><p>clock datetime</p>
<p>设置当前时间和日期</p>
<p>clock datetime 10:20:29 2020-02-22</p>
</li>
<li><p>clock daylight-saving-time</p>
<p>设置采用夏时制</p>
</li>
<li><p>header login</p>
<p>设置用户登录前显示的标题消息</p>
<p>header login information “xxxxxxx”</p>
</li>
<li><p>header shell</p>
<p>设置用户登录后显示的标题消息</p>
<p>header shell information “xxxxxxx”</p>
</li>
</ul>
<h3 id="2-6-命令等级"><a href="#2-6-命令等级" class="headerlink" title="2.6 命令等级"></a>2.6 命令等级</h3><ul>
<li>系统将命令进行分级管理，以增加设备的安全性</li>
<li>设备管理员可以设置用户级别，一定级别的用户可以使用对应级别的命令行</li>
<li>缺省情况下命令级别分为0<del>3级，用户级别分为0\</del>15级<ol>
<li><p>用户0级为访问级别，对应网络诊断工具命令( ping、tracert )、从本设备出发访问外部设备的命令(Telnet客户端)、部分display命令等</p>
</li>
<li><p>用户1级为监控级别，对应命令级0、1级，包括用于系统维护的命令以及display等命令</p>
</li>
<li><p>用户2级是配置级别，包括向用户提供直接网络服务，包括路由、各个网络层次的命令</p>
</li>
<li><p>用户3-15级是管理级别，对应命令3级，该级别主要是用于系统运行的命令，对业务提供支撑作用，包括文件系统、FTP、TFTP下载、文件交换配置、电源供应控制，备份板控制、用户管理、命令级别设置、系统内部参数设置以及用于业务故障诊断的debugging命令。本例展示了如何修改命令级别，在用户视图下执行save命令需要3级的权限</p>
<figure class="highlight crmsh"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs crmsh">command-privilege level <span class="hljs-number">3</span> view <span class="hljs-keyword">user</span> <span class="hljs-title">save</span><br></code></pre></div></td></tr></table></figure></li>
</ol>
</li>
<li>在具体使用中，如果我们有多个管理员帐号，但只允许某一个管理员保存系统配置，则可以将save命令的级别提高到4级，并定义只有该管理员有4级权限。这样，在不影响其他用户的情况下，可以实现对命令的使用控制</li>
</ul>
<h3 id="2-7-用户界面"><a href="#2-7-用户界面" class="headerlink" title="2.7 用户界面"></a>2.7 用户界面</h3><ul>
<li><p>每类用户界面都有对应的用户界面视图</p>
<p>用户界面( User-interface )视图是系统提供的一种命令行视图，用来配置和管理所有工作在异步交互方式下的物理接口和逻辑接口，从而达到统一管理各种用户界面的目的。在连接到设备前，用户要设置用户界面参数</p>
<p>系统支持的用户界面包括Console用户界面和VTY用户界面</p>
<p>控制口（Console Port )是一种通信串行端口，由设备的主控板提供。虚拟类型终端(VirtualType Terminal )是一种虚拟线路端口，用户通过终端与设备建立Telnet或SSH连接后，也就建立了一条VTY，即用户可以通过VTY方式登录设备。设备一般最多支持15个用户同时通过VTY方式访问。执行user-interface maximum-vty number命令可以配置同时登录到设备的VTY类型用户界面的最大个数。如果将最大登录用户数设为0，则任何用户都不能通过TeInet或者SSH登录到路由器。display user-interface命令用来查看用户界面信息。</p>
</li>
<li><p>不同的设备，或使用不同版本的VRP软件系统，具体可以被使用的VTY接口的最大数量可能不同。</p>
</li>
</ul>
<h3 id="2-8-配置用户界面命令"><a href="#2-8-配置用户界面命令" class="headerlink" title="2.8 配置用户界面命令"></a>2.8 配置用户界面命令</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>idle-timeout</td>
<td>设置超时时间</td>
</tr>
<tr>
<td>screen-length</td>
<td>设置指定终端屏幕的临时显示行数</td>
</tr>
<tr>
<td>history-cimmandmax-size</td>
<td>设置历史命令缓冲区的大小</td>
</tr>
</tbody></table>
<h3 id="2-9-配置登录权限"><a href="#2-9-配置登录权限" class="headerlink" title="2.9 配置登录权限"></a>2.9 配置登录权限</h3><table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>user privilege</td>
<td>配置指定用户界面下的用户等级</td>
</tr>
<tr>
<td>set authentication password</td>
<td>配置本地认证密码</td>
</tr>
</tbody></table>
<ul>
<li>本页介绍只使用密码登陆的情况下，登陆权限的密码配置方式</li>
<li>配置用户界面的用户认证方式后，用户登录设备时，需要输入密码进行认证，这样就限制了用户访问设备的权限。在通过VTY进行Telnet连接时，所有接入设备的用户都必须要经过认证</li>
<li>设备提供三种认证模式，AAA模式、密码认证模式和不认证模式。AAA认证模式具有很高的安全性，因为登录时必须输入用户名和密码。密码认证只需要输入登录密码即可，所以所有的用户使用的都是同一个密码。使用不认证模式就是不需要对用户认证直接登陆到设备。需要注意的是，Console界面默认使用不认证模式</li>
<li>对于Telnet登录用户，授权是非常必要的，最好设置用户名、密码和指定和帐号相关联的权限</li>
<li>注︰不同VRP版本执行set authentication password cipher命令有差异∶有些平台需要回车后输入密码，另外一些平台可直接在命令后输入密码。故在操作具体产品时请查阅相应VRP产品文档。</li>
</ul>
<h3 id="2-10-配置接口IP地址"><a href="#2-10-配置接口IP地址" class="headerlink" title="2.10 配置接口IP地址"></a>2.10 配置接口IP地址</h3><ol>
<li><p>要在接口运行IP服务，必须为接口配置一个IP地址。一个接口一般只需要一个IP地址。在特殊情况下，也有可能为接口配置一个次要IP地址</p>
<p>例如，当路由器AR2200E的接口连接到一个物理网络时，该物理网络中的主机属于两个网段。为了让两个网段的主机都可以通过路由器AR2200E访问其它网络，可以配置一个主IP地址和一个次要IP地址。一个接口只能有一个主IP地址，如果接口配置了新的主IP地址，那么新的主IP地址就替代了原来的主IP地址</p>
</li>
<li><p>用户可以利用ip address &lt;ip-address &gt; { mask / mask-length }命令为接口配置IP地址，这个命令中，mask代表的是32比特的子网掩码，如255.255.255.0 ，mask-length 代表的是可替换的掩码长度值，如24，这两者可以交换使用</p>
</li>
<li><p>Loopback接口是一个逻辑接口，可用来虚拟一个网络或者一个IP主机。在运行多种协议的时候，由于Loopback接口稳定可靠，所以也可以用来做管理接口</p>
</li>
<li><p>在给物理接口配置IP地址时，需要关注该接口的物理状态。默认情况下，华为路由器和交换机的接口状态为up;如果该接口曾被手动关闭，则在配置完IP地址后，应使用undoshutdown打开该接口</p>
</li>
</ol>
<h2 id="3-文件系统基础"><a href="#3-文件系统基础" class="headerlink" title="3. 文件系统基础"></a>3. 文件系统基础</h2><p>华为网络设备的配置文件和VRP系统文件都保存在物理存储介质中，所以文件系统是VRP正常运行的基础。</p>
<h3 id="3-1-基本查询命令"><a href="#3-1-基本查询命令" class="headerlink" title="3.1 基本查询命令"></a>3.1 基本查询命令</h3><table>
<thead>
<tr>
<th>功能</th>
<th>命令</th>
</tr>
</thead>
<tbody><tr>
<td>查看当前目录</td>
<td>pwd</td>
</tr>
<tr>
<td>显示当前目录下的问文件信息</td>
<td>dir</td>
</tr>
<tr>
<td>查看文本文件的具体内容</td>
<td>more</td>
</tr>
</tbody></table>
<ul>
<li>pwd命令用来显示当前工作目录</li>
<li>dir [ /all ] [ filename | directory ]命令用来查看当前目录下的文件信息</li>
<li>more [ /binary ] filename [ offset ] [ all ]命令用来查看文本文件的具体内容</li>
</ul>
<h3 id="3-2-目录操作"><a href="#3-2-目录操作" class="headerlink" title="3.2 目录操作"></a>3.2 目录操作</h3><ul>
<li>cd directory命令用来修改用户当前的工作目录</li>
<li>mkdir directory命令能够创建一个新的目录。目录名称可以包含1-64个字符</li>
<li>rmdir directory命令能够删除文件系统中的目录，此处需要注意的是，只有空目录才能被删除</li>
</ul>
<h3 id="3-3-文件操作"><a href="#3-3-文件操作" class="headerlink" title="3.3 文件操作"></a>3.3 文件操作</h3><ul>
<li>copy source-filename destination-filename命令可以复制文件。如果目标文件已存在，系统会提示此文件将被替换。目标文件名不能与系统启动文件同名，否则系统将会出现错误提示</li>
<li>move source-filename destination-filename命令可以用来将文件移动到其他目录下。move命令只适用于在同一储存设备中移动文件</li>
<li>rename old-name new-name命令可以用来对目录或文件进行重命名</li>
<li>delete [ /unreserved ] [ /force ] { filename | devicename }命令可以用来删除文件。一般情况下，被删除的文件将直接被移动到回收站。回收站中的文件也可以通过执行<br>undelete命令进行恢复，但是如果执行delete命令时指定了unreserved参数，则文件将被永久删除。在删除文件时，系统会提示“是否确定删除文件”，但如果命令中指定了<br>/force参数，系统将不会给出任何提示信息。filename参数指的是需要删除的文件的名称，device-name参数指定了储存设备的名称</li>
<li>reset recycle-bin [ filename | devicename ]可以用来永久删除回收站中的文件，<br>filename参数指定了需要永久删除的文件的名称，device-name参数指定了储存设备的名称</li>
</ul>
<h3 id="3-4-配置文件管理"><a href="#3-4-配置文件管理" class="headerlink" title="3.4 配置文件管理"></a>3.4 配置文件管理</h3><ul>
<li>设备中的配置文件分为两种类型:当前配置文件和保存的配置文件。当前配置文件储存在设备的RAM中。用户可以通过命令行对设备进行配置，配置完成后使用save命令保存当前配置到存储设备中，形成保存的配置文件。保存的配置文件都是以“.cfg”或“.zip”作为扩展名，存放在存储设备的根目录下</li>
<li>在设备启动时，会从默认的存储路径下加载保存的配置文件到RAM中。如果默认存储路径中没有保存的配置文件，则设备会使用缺省参数进行初始化配置。</li>
</ul>
<h3 id="3-5-配置文件查询"><a href="#3-5-配置文件查询" class="headerlink" title="3.5 配置文件查询"></a>3.5 配置文件查询</h3><ul>
<li>display current-configuration命令可以用来查看设备当前生效的配置</li>
<li>display current-configuration | begin {fregular-expression}命令可以显示以不同参数或表达式开头的配置</li>
<li>display current-configuration | include {fregular-expression}命令可以显示包含了指定关键字或表达式的配置</li>
<li>display saved-configuration [last|time]命令用来查看设备下次启动时加载的配置文件。使用last参数可以显示本次启动时使用的配置文件内容。使用time参数可以显示系统启动后最近的一次手工或者系统自动保存配置的时间</li>
</ul>
<h3 id="3-6-配置文件保存"><a href="#3-6-配置文件保存" class="headerlink" title="3.6 配置文件保存"></a>3.6 配置文件保存</h3><p>save [configuration-file]命令可以用来保存当前配置信息到系统默认的存储路径中。configuration-file为配置文件的文件名，此参数可选。</p>
<h3 id="3-7-系统启动文件查询"><a href="#3-7-系统启动文件查询" class="headerlink" title="3.7 系统启动文件查询"></a>3.7 系统启动文件查询</h3><ul>
<li>display startup命令用来查看设备本次及下次启动相关的系统软件、备份系统软件、配置文件、License文件、补丁文件以及语音文件</li>
<li>Startup system software表示的是本次系统启动所使用的VRP文件</li>
<li>Next startup system software表示的是下次系统启动所使用的VRP文件</li>
<li>Startup saved-configuration file表示的是本次系统启动所使用的配置文件</li>
<li>Next startup saved-configuration file表示的是下次系统启动所使用的配置文件</li>
</ul>
<h3 id="3-8-系统启动配置文件修改"><a href="#3-8-系统启动配置文件修改" class="headerlink" title="3.8 系统启动配置文件修改"></a>3.8 系统启动配置文件修改</h3><p>startup saved-configuration [configuration-file]命令用来指定系统下次启动时使用的配置文件，configuration-file参数为系统启动配置文件的名称</p>
<h3 id="3-9-比较当前配置和保存的配置"><a href="#3-9-比较当前配置和保存的配置" class="headerlink" title="3.9 比较当前配置和保存的配置"></a>3.9 比较当前配置和保存的配置</h3><ul>
<li>compare configuration [configuration-file] [current-line-number save-line-number]命令用来比较当前的配置与下次启动的配置文件内容的区别，configuration-file指定需要与当前配置进行比较的配置文件名，current-line-number表示从当前配置的该行号开始比较，save-line-number表示从指定配置的该行号开始比较</li>
<li>当执行该命令后，系统默认会将保存的配置与当前配置从第一行开始逐行进行比较。如果指定了current-line-number或save-line-number参数，系统会跳过不相关的配置，从指定的行号开始查找两个配置文件的不同。系统比较出不同之处以后，将从两者有差异的地方开始显示字符，默认显示120个字符，如果从该不同之处到文件末尾不足120个字符，将显示到文件尾为止</li>
</ul>
<h3 id="3-10-配置文件重置"><a href="#3-10-配置文件重置" class="headerlink" title="3.10 配置文件重置"></a>3.10 配置文件重置</h3><ul>
<li>reset saved-configuration命令用来清除存储设备中启动配置文件的内容</li>
<li>执行该命令后，如果不使用命令startup saved-configuration重新指定设备下次启动时使用的配置文件，也不使用save命令保存配置文件，则设备下次启动时会采用缺省的配置参数进行初始化</li>
</ul>
<h3 id="3-11-存储设备"><a href="#3-11-存储设备" class="headerlink" title="3.11 存储设备"></a>3.11 存储设备</h3><ul>
<li><p>存储设备包括SDRAM、Flash、NVRAM、SD卡、U盘。执行display version命令可以查看华为存储设备的详细信息</p>
</li>
<li><p>fixdisk命令用来对文件系统出现异常的存储设备进行修复</p>
<p>当存储设备上的文件系统出现异常时，终端会给出提示信息，此时建议使用此命令进行修复，但不确保修复成功。执行此命令后，如果仍然收到系统建议修复的信息，则表示物理介质可能已经损坏</p>
</li>
<li><p>此命令是问题修复类命令，在系统未出现问题时，建议用户不要执行此命令。注︰有些VRP版本不支持fixdisk命令，在操作具体产品时请查阅相应VRP产品文档</p>
</li>
<li><p>format [devicename]命令用来格式化存储器。在执行format命令时，需要指定<br>devicename参数，表示格式化特定的存储器。执行此命令后，会清空指定存储器中的所有文件和目录，并且不可恢复。请谨慎使用此命令!</p>
</li>
</ul>
<h2 id="4-VRP系统管理"><a href="#4-VRP系统管理" class="headerlink" title="4. VRP系统管理"></a>4. VRP系统管理</h2><h3 id="4-1-文件传输"><a href="#4-1-文件传输" class="headerlink" title="4.1 文件传输"></a>4.1 文件传输</h3><ul>
<li>文件传输是指发送文件到远程服务器，或者从远程服务器获取文件的过程</li>
<li>在实际场景中，为满足企业业务的需求，设备的VRP文件需要更新。如图中所示，设备在与服务器建立连接之后，可以从服务器获取新的VRP，完成更新工作</li>
<li>为避免数据丢失对业务造成影响，设备的配置文件和日志文件也通常会进行远程备份。如图中所示，设备在与服务器建立连接之后，可以将配置文件和日志文件传输到服务器上，完成备份工作。当设备上的文件丢失后，可以恢复之前服务器上备份的配置文件和日志文件</li>
</ul>
<h3 id="4-2-文件传输协议"><a href="#4-2-文件传输协议" class="headerlink" title="4.2 文件传输协议"></a>4.2 文件传输协议</h3><ol>
<li><p>FTP ( File Transfer Protocol )是TCP/IP协议族中的一种应用层协议，称为文件传输协议FTP的主要功能是向用户提供本地和远程主机之间的文件传输</p>
<p>在进行版本升级、日志下载和配置保存等业务操作时，会广泛地使用到FTP</p>
<p>FTP采用两个TCP连接︰控制连接和数据连接。其中控制连接用于连接控制端口，传输控制命令;数据连接用于连接数据端口，传输数据</p>
<p>在控制连接建立后，数据连接通过控制端口的命令建立起连接，进行数据的传输。FTP数据连接的建立有两种:主动模式和被动模式，两者的区别在于数据连接是由服务器发起还是由客户端发起。ARG3系列路由器既可以作为FTP Client又可以作为FTP Server。缺省情况下，AR2200采用主动模式建立数据连接</p>
</li>
<li><p>TFTP ( Trivial File Transfer Protocol )是一种简化的文件传输协议。</p>
<p>TFTP协议使用UDP协议进行文件的传输，由客户端发起TFTP传输请求，实现文件的上传和下载。ARG3系列路由器只可以作为TFTP客户端</p>
</li>
</ol>
<h3 id="4-3-VRP系统文件更新配置-从FTP-TFTP服务器获取VRP"><a href="#4-3-VRP系统文件更新配置-从FTP-TFTP服务器获取VRP" class="headerlink" title="4.3 VRP系统文件更新配置-从FTP/TFTP服务器获取VRP"></a>4.3 VRP系统文件更新配置-从FTP/TFTP服务器获取VRP</h3><p><img src="https://pic.imgdb.cn/item/60f132515132923bf802d8c9.png" srcset="/img/loading.gif" lazyload></p>
<ol>
<li>如需从FTP服务器获取文件，客户端需使用ftp lip address]命令来发起FTP连接请求，其中ip address指的是FTP服务器的IP地址。客户端和FTP服务器建立连接之后，客户端需要使用FTP服务器中配置的用户名和密码进行认证。认证通过后，客户端可以访问FTP服务器，并且能够查看和下载存储在服务器中的文件</li>
<li>本例中客户端使用ftp 10.1.1.2和FTP服务器建立了连接，使用get AR2220E-V200R007C00SPC600.cc命令可以获取位于FTP服务器上的VRP文件</li>
<li>如果客户端需要从TFTP服务器获取VRP文件，则不需要首先和TFTP服务器建立连接。ARG3系列路由器和X7系列交换机只能作为TFTP客户端。客户端通过配置tftp10.1.1.2 get AR2220E-V200R003C00SPC600.cc就可以从TFTP服务器获取VRP文件</li>
</ol>
<h3 id="4-4-VRP系统文件更新配置-指定下次启动时加载的VRP"><a href="#4-4-VRP系统文件更新配置-指定下次启动时加载的VRP" class="headerlink" title="4.4 VRP系统文件更新配置-指定下次启动时加载的VRP"></a>4.4 VRP系统文件更新配置-指定下次启动时加载的VRP</h3><ol>
<li>从服务器成功获取VRP文件后，还需要配置此文件为设备下次启动的系统文件，否则，设备仍会使用旧版本的VRP系统文件。在设备上通过使用startup system-software命令可以指定设备下次启动的系统文件。VRP系统文件必须存储在根目录，否则系统不能正常运行</li>
<li>可以使用display startup命令去验证系统启动文件是否已经变更，显示信息中Startup system software显示当前系统启动使用的VRP文件，Next startup systemsoftware显示下次系统启动使用的VRP文件</li>
</ol>
<h3 id="4-5-VRP系统文件更新配置-重启设备"><a href="#4-5-VRP系统文件更新配置-重启设备" class="headerlink" title="4.5 VRP系统文件更新配置-重启设备"></a>4.5 VRP系统文件更新配置-重启设备</h3><p>确认系统下次启动软件正确后，需要重启设备。使用reboot命令可以重启设备。输入此命令后，系统会提示是否保存配置文件;实际中，可根据需要进行选择。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/">网络基础</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/">网络基础</a>
                    
                      <a class="hover-with-bg" href="/tags/VRP%E5%9F%BA%E7%A1%80/">VRP基础</a>
                    
                  </div>
                
              </div>
              
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <i class="iconfont icon-love"></i> <a href="/" target="_blank" rel="nofollow noopener"><span>MyBlog</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script  src="/js/local-search.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
